<script type="text/javascript">
    processos = <?php echo $this->processos ?>;
</script>
<script type="text/javascript" src="/processos/processos-js"></script>
<script type="text/javascript" src="/angular/ui-utils/modules/mask/mask.js"></script>
<script type="text/javascript" src="/angular/bootstrap/src/pagination/pagination.js"></script>
<!--<script type="text/javascript" src="/assets/js/processo.js"></script>-->

<div ng-app="App" ng-controller="ProcessosController">
    <form action="" method="post" class="form-search" style="font-size: 12px;">
        <fieldset>
            <h3>Processos</h3>
            <div class="control-group">
                <label class="control-label">
                    <input ng-model="search" autocomplete="off" id="auto-complete" 
                           placeholder="ID, Nome Empresa, Cliente ou Serviço" name="nome_cliente" class="search-query input-xlarge" type="text"/>
                </label>
                <label class="control-label">
                    <input ng-model="dtColeta" ui-mask="99-99-9999" id="appendInput" name="dt_coleta" type="text" class="date input-small">
                </label>
                <label class="control-label">
                    <input ng-model="dtEntrega" ui-mask="99-99-9999" name="dt_entrega" type="text" class="date input-small">
                    <button ng-click="resetForm()" type="reset" class="btn">Limpar</button>
                    <button type="submit" class="btn btn-primary">Buscar</button>
                </label>
            </div>
        </fieldset>
        <div class="well well-small">
            Ver somente   
            <select class="input-small" name="limit" ng-model="limitData">
                <option selected>30</option>
                <option>50</option>
                <option>70</option>
                <option>200</option>
                <option>500</option>
                <option>1000</option>
            </select>
            <label class="label label-success pull-right">{{count}} Resultado(s) para: <strong>{{search}}</strong></label>
        </div>
        <table class="table table-bordered table-striped table-condensed">
            <thead>
            <th>ID</th>
            <th>Processo</th>
            <th width="50">Empresa</th>
            <th>Cliente</th>
            <th>Quant.</th>
            <th>Prod/Mod/Cor/Marca</th>
            <th width="180">Conserto</th>
            <th width="75">Coleta</th>
            <th width="75">Entrega</th>
            <th>Status</th>
            <th>Ações</th>
            </thead>
            <tbody ng-repeat="processo in collection| filter:search | limitTo:limitData" 
                   ng-if="filterDataColeta(processo.dt_coleta) && filterDataEntrega(processo.dt_entrega)">
                <tr>
                    <td>{{processo.id_processo}}</td>
                    <td>{{processo.cod_processo}}</td>
                    <td>{{processo.nome_empresa}}</td>
                    <td>{{processo.nome_contato}}</td>
                    <td>{{processo.quantidade}}</td>
                    <td>{{processo.descricao_produto}}</td>
                    <td>{{processo.conserto}}</td>
                    <td>{{processo.dt_coleta_br}}</td>
                    <td>{{processo.dt_entrega_br}}</td>
                    <td>{{processo.tx_status}}</td>
                    <td>
                        <div class="btn-group">
                            <a class="btn" href="/admin/processos/detalhes/id/{{processo.id_processo}}" title="Histórico/Detalhes">
                                <i class="icon-list"></i>
                            </a>
                            <a class="btn" href="/admin/processos/editar/id/{{processo.id_processo}}" title="Editar">
                                <i class="icon-edit"></i>
                            </a>
                            <a class="btn btn-danger" href="/admin/processos/delete/id/{{processo.id_processo}}" title="Apagar">
                                <i class="icon-trash icon-white"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>